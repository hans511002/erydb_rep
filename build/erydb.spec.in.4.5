#
# $Id$
#
Summary: EryDB software
Name: erydb
@@VERSION@@
@@RELEASE@@
Vendor: EryDB, Inc.
URL: http://www.erydb.com/
@@PACKAGER@@
Group: Applications
License: Copyright (c) 2016 EryDB, Inc., all rights reserved; redistributable under the terms of the GPL, see the file COPYING for details.
BuildRoot: %{_tmppath}/%{name}-%{release}-buildroot

%description
EryDB software meta-package

%package platform
Summary: EryDB software binaries
Group: Applications
Obsoletes: erydb
Requires: expect, erydb-libs

%description platform
EryDB binary files
@@BUILDINFO@@

%package libs
Summary: EryDB software libraries
Group: Applications
Obsoletes: erydb

%description libs
EryDB libraries

%package enterprise
Summary: EryDB Enterprise software binaries
Group: Applications
Obsoletes: erydb
Requires: erydb-libs, erydb-platform

%description enterprise
EryDB Enterprise binary files

%package storage-engine
Summary: EryDB software MariaDB connector
Group: Applications
Obsoletes: erydb-mysql
Requires: erydb-libs

%description storage-engine
EryDB connector binary files

%package mysql
Summary: EryDB software MySQL server
Group: Applications
Obsoletes: erydb-mysqld

%description mysql
EryDB/MySQL 5.1.73 server binary files

%prep
%define _use_internal_dependency_generator 0
%define __find_requires %{nil}
%define __os_install_post %{nil}
%define debug_package %{nil}

%build

%install
mkdir -p %{buildroot}/usr/local
tar -C $RPM_BUILD_DIR/%{name}-%{version}-%{release} -cf - . | tar -C %{buildroot}/usr/local -xf -

%clean
rm -rf $RPM_BUILD_ROOT $RPM_BUILD_DIR/%{name}-%{version}-%{release}

%changelog

%files platform
%defattr(-, root, root)

/usr/local/erydb/bin/DDLProc
/usr/local/erydb/bin/ExeMgr
/usr/local/erydb/bin/ProcMgr
/usr/local/erydb/bin/ProcMon
/usr/local/erydb/bin/DMLProc
/usr/local/erydb/bin/WriteEngineServer
/usr/local/erydb/bin/cpimport
/usr/local/erydb/bin/post-install
/usr/local/erydb/bin/post-mysql-install
/usr/local/erydb/bin/post-mysqld-install
/usr/local/erydb/bin/pre-uninstall
/usr/local/erydb/bin/PrimProc
/usr/local/erydb/bin/DecomSvr
/usr/local/erydb/bin/upgrade-erydb.sh
/usr/local/erydb/bin/run.sh
/usr/local/erydb/bin/erydb
/usr/local/erydb/bin/erydbSyslog 
/usr/local/erydb/bin/erydbSyslog-ng 
/usr/local/erydb/bin/syslogSetup.sh
/usr/local/erydb/bin/cplogger
/usr/local/erydb/bin/erydb.def
/usr/local/erydb/bin/dbbuilder
/usr/local/erydb/bin/cpimport.bin
/usr/local/erydb/bin/load_brm
/usr/local/erydb/bin/save_brm
/usr/local/erydb/bin/dbrmctl
/usr/local/erydb/bin/controllernode
/usr/local/erydb/bin/reset_locks
/usr/local/erydb/bin/workernode
/usr/local/erydb/bin/colxml
/usr/local/erydb/bin/clearShm
/usr/local/erydb/bin/viewtablelock
/usr/local/erydb/bin/cleartablelock
/usr/local/erydb/bin/erydbConsole
/usr/local/erydb/bin/trapHandler
/usr/local/erydb/bin/remote_command.sh
/usr/local/erydb/bin/postConfigure
/usr/local/erydb/bin/erydbLogRotate
/usr/local/erydb/bin/transactionLog
/usr/local/erydb/bin/erydbDBWrite
/usr/local/erydb/bin/transactionLogArchiver.sh
/usr/local/erydb/bin/system_installer.sh
/usr/local/erydb/bin/installer
/usr/local/erydb/bin/module_installer.sh
/usr/local/erydb/bin/patchInstaller
/usr/local/erydb/bin/patch_installer.sh
/usr/local/erydb/bin/xm_installer.sh
/usr/local/erydb/bin/erydbUninstall.sh
/usr/local/erydb/bin/director_installer.sh
/usr/local/erydb/bin/user_installer.sh
/usr/local/erydb/bin/performance_installer.sh
/usr/local/erydb/bin/startupTests.sh
/usr/local/erydb/bin/os_check.sh
/usr/local/erydb/bin/sendtrap
/usr/local/erydb/bin/remote_scp_put.sh
/usr/local/erydb/bin/remotessh.exp
/usr/local/erydb/bin/ServerMonitor
/usr/local/erydb/bin/master-rep-erydb.sh 
/usr/local/erydb/bin/slave-rep-erydb.sh
/usr/local/erydb/bin/rsync.sh
/usr/local/erydb/bin/erydbSupport
/usr/local/erydb/bin/hardwareReport.sh
/usr/local/erydb/bin/softwareReport.sh
/usr/local/erydb/bin/configReport.sh
/usr/local/erydb/bin/logReport.sh
/usr/local/erydb/bin/bulklogReport.sh
/usr/local/erydb/bin/resourceReport.sh
/usr/local/erydb/bin/hadoopReport.sh
/usr/local/erydb/bin/alarmReport.sh
/usr/local/erydb/bin/amazonInstaller
/usr/local/erydb/bin/remote_command_verify.sh

#
%config /usr/local/erydb/etc/erydb.xml
%config /usr/local/erydb/etc/ConsoleCmds.xml
%config /usr/local/erydb/etc/ProcessConfig.xml
%config /usr/local/erydb/etc/snmpd.conf
%config /usr/local/erydb/etc/snmptrapd.conf
%config /usr/local/erydb/etc/erydb.xml.singleserver
%config /usr/local/erydb/etc/ProcessConfig.xml.singleserver
%config /usr/local/erydb/etc/snmpd.conf.singleserver
%config /usr/local/erydb/etc/snmptrapd.conf.singleserver
#
/usr/local/erydb/etc/MessageFile.txt
/usr/local/erydb/etc/ErrorMessage.txt
#
%attr(0666, root, root) /usr/local/erydb/local/module
#
/usr/local/erydb/releasenum

# Tools...
/usr/local/erydb/bin/rollback
/usr/local/erydb/bin/editem
/usr/local/erydb/bin/getConfig
/usr/local/erydb/bin/setConfig
/usr/local/erydb/bin/setenv-hdfs-12
/usr/local/erydb/bin/setenv-hdfs-20
/usr/local/erydb/bin/hdfsCheck
/usr/local/erydb/bin/configxml.sh
/usr/local/erydb/bin/remote_scp_get.sh
/usr/local/erydb/bin/erydbAlias
/usr/local/erydb/bin/autoConfigure
/usr/local/erydb/bin/ddlcleanup
/usr/local/erydb/bin/erydbmeminfo
/usr/local/erydb/bin/ERYDBInstanceCmds.sh
/usr/local/erydb/bin/ERYDBVolumeCmds.sh
/usr/local/erydb/bin/binary_installer.sh 
/usr/local/erydb/bin/myCnf-include-args.text 
/usr/local/erydb/bin/myCnf-exclude-args.text
/usr/local/erydb/bin/mycnfUpgrade

/usr/local/erydb/sbin/snmpd
/usr/local/erydb/sbin/snmptrapd
%config %attr(0666, root, root) /usr/local/erydb/etc/AlarmConfig.xml
#
%config /usr/local/erydb/local/snmpdx.conf
%config /usr/local/erydb/local/snmpdx.conf.singleserver
#
/usr/local/erydb/share/snmp/mibs/AGENTX-MIB.txt
/usr/local/erydb/share/snmp/mibs/ERYDB-MIB.txt
/usr/local/erydb/share/snmp/mibs/DISMAN-EVENT-MIB.txt
/usr/local/erydb/share/snmp/mibs/DISMAN-SCHEDULE-MIB.txt
/usr/local/erydb/share/snmp/mibs/DISMAN-SCRIPT-MIB.txt
/usr/local/erydb/share/snmp/mibs/EtherLike-MIB.txt
/usr/local/erydb/share/snmp/mibs/HCNUM-TC.txt
/usr/local/erydb/share/snmp/mibs/HOST-RESOURCES-MIB.txt
/usr/local/erydb/share/snmp/mibs/HOST-RESOURCES-TYPES.txt
/usr/local/erydb/share/snmp/mibs/IANA-ADDRESS-FAMILY-NUMBERS-MIB.txt
/usr/local/erydb/share/snmp/mibs/IANAifType-MIB.txt
/usr/local/erydb/share/snmp/mibs/IANA-LANGUAGE-MIB.txt
/usr/local/erydb/share/snmp/mibs/IANA-RTPROTO-MIB.txt
/usr/local/erydb/share/snmp/mibs/IF-INVERTED-STACK-MIB.txt
/usr/local/erydb/share/snmp/mibs/IF-MIB.txt
/usr/local/erydb/share/snmp/mibs/INET-ADDRESS-MIB.txt
/usr/local/erydb/share/snmp/mibs/IP-FORWARD-MIB.txt
/usr/local/erydb/share/snmp/mibs/IP-MIB.txt
/usr/local/erydb/share/snmp/mibs/IPV6-ICMP-MIB.txt
/usr/local/erydb/share/snmp/mibs/IPV6-MIB.txt
/usr/local/erydb/share/snmp/mibs/IPV6-TCP-MIB.txt
/usr/local/erydb/share/snmp/mibs/IPV6-TC.txt
/usr/local/erydb/share/snmp/mibs/IPV6-UDP-MIB.txt
/usr/local/erydb/share/snmp/mibs/NET-SNMP-AGENT-MIB.txt
/usr/local/erydb/share/snmp/mibs/NET-SNMP-EXAMPLES-MIB.txt
/usr/local/erydb/share/snmp/mibs/NET-SNMP-EXTEND-MIB.txt
/usr/local/erydb/share/snmp/mibs/NET-SNMP-MIB.txt
/usr/local/erydb/share/snmp/mibs/NET-SNMP-TC.txt
/usr/local/erydb/share/snmp/mibs/NOTIFICATION-LOG-MIB.txt
/usr/local/erydb/share/snmp/mibs/RFC1155-SMI.txt
/usr/local/erydb/share/snmp/mibs/RFC1213-MIB.txt
/usr/local/erydb/share/snmp/mibs/RFC-1215.txt
/usr/local/erydb/share/snmp/mibs/RMON-MIB.txt
/usr/local/erydb/share/snmp/mibs/SMUX-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-COMMUNITY-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-FRAMEWORK-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-MPD-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-NOTIFICATION-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-PROXY-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-TARGET-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-USER-BASED-SM-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-USM-AES-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMP-USM-DH-OBJECTS-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMPv2-CONF.txt
/usr/local/erydb/share/snmp/mibs/SNMPv2-MIB.txt
/usr/local/erydb/share/snmp/mibs/SNMPv2-SMI.txt
/usr/local/erydb/share/snmp/mibs/SNMPv2-TC.txt
/usr/local/erydb/share/snmp/mibs/SNMPv2-TM.txt
/usr/local/erydb/share/snmp/mibs/SNMP-VIEW-BASED-ACM-MIB.txt
/usr/local/erydb/share/snmp/mibs/TCP-MIB.txt
/usr/local/erydb/share/snmp/mibs/TRANSPORT-ADDRESS-MIB.txt
/usr/local/erydb/share/snmp/mibs/UCD-DEMO-MIB.txt
/usr/local/erydb/share/snmp/mibs/UCD-DISKIO-MIB.txt
/usr/local/erydb/share/snmp/mibs/UCD-DLMOD-MIB.txt
/usr/local/erydb/share/snmp/mibs/UCD-IPFWACC-MIB.txt
/usr/local/erydb/share/snmp/mibs/UCD-SNMP-MIB.txt
/usr/local/erydb/share/snmp/mibs/UDP-MIB.txt
#
/usr/local/erydb/post/functions
/usr/local/erydb/post/test-001.sh
/usr/local/erydb/post/test-002.sh
/usr/local/erydb/post/test-003.sh
/usr/local/erydb/post/test-004.sh

%files enterprise
%defattr(-, root, root)
/usr/local/erydb/bin/displayJobGraph.sh
/usr/local/erydb/bin/dbhealth.sh 
/usr/local/erydb/bin/dbhealth.sql

# Tools...
/usr/local/erydb/bin/dumpcol
/usr/local/erydb/bin/oid2file
/usr/local/erydb/bin/evalcol
/usr/local/erydb/bin/SesMgr
/usr/local/erydb/bin/dumpVss
/usr/local/erydb/bin/editTxn
/usr/local/erydb/bin/dbprof.pl
/usr/local/erydb/bin/dumpobm
/usr/local/erydb/bin/file2oid.pl
/usr/local/erydb/bin/print_journal
/usr/local/erydb/bin/healthcheck
/usr/local/erydb/bin/glusterctl
/usr/local/erydb/bin/glusteradd
/usr/local/erydb/bin/glusterconf
/usr/local/erydb/bin/redistributeDB
/usr/local/erydb/bin/databaseSizeReport
/usr/local/erydb/bin/gdb
#
/usr/local/erydb/tools/copy2here.sh
/usr/local/erydb/tools/getlogs.sh
/usr/local/erydb/tools/getmodules.sh
/usr/local/erydb/tools/getps.sh
/usr/local/erydb/tools/getsar.sh
/usr/local/erydb/tools/getuserinput.sh
/usr/local/erydb/tools/prat
/usr/local/erydb/tools/prat.sh
/usr/local/erydb/tools/ps
/usr/local/erydb/tools/pscollect
/usr/local/erydb/tools/README
/usr/local/erydb/tools/tarfiles.sh
#
%files libs
%defattr(-, root, root)

/usr/local/erydb/lib/libconfigcpp.so.1.0.0
/usr/local/erydb/lib/libddlpackageproc.so.1.0.0
/usr/local/erydb/lib/libddlpackage.so.1.0.0
/usr/local/erydb/lib/libdmlpackageproc.so.1.0.0
/usr/local/erydb/lib/libdmlpackage.so.1.0.0
/usr/local/erydb/lib/libexecplan.so.1.0.0
/usr/local/erydb/lib/libfuncexp.so.1.0.0
/usr/local/erydb/lib/libudfsdk.so.1.0.0
/usr/local/erydb/lib/libjoblist.so.1.0.0
/usr/local/erydb/lib/libjoiner.so.1.0.0
/usr/local/erydb/lib/libloggingcpp.so.1.0.0
/usr/local/erydb/lib/libmessageqcpp.so.1.0.0
/usr/local/erydb/lib/libnetsnmpagent.so.5.2.1
/usr/local/erydb/lib/libnetsnmphelpers.so.5.2.1
/usr/local/erydb/lib/libnetsnmpmibs.so.5.2.1
/usr/local/erydb/lib/libnetsnmp.so.5.2.1
/usr/local/erydb/lib/libnetsnmptrapd.so.5.2.1
/usr/local/erydb/lib/liboamcpp.so.1.0.0
/usr/local/erydb/lib/libsnmpmanager.so.1.0.0
/usr/local/erydb/lib/libthreadpool.so.1.0.0
/usr/local/erydb/lib/libwindowfunction.so.1.0.0
/usr/local/erydb/lib/libwriteengine.so.1.0.0
/usr/local/erydb/lib/libwriteengineclient.so.1.0.0
/usr/local/erydb/lib/libbrm.so.1.0.0
/usr/local/erydb/lib/librwlock.so.1.0.0
/usr/local/erydb/lib/libdataconvert.so.1.0.0
/usr/local/erydb/lib/librowgroup.so.1.0.0
/usr/local/erydb/lib/libcacheutils.so.1.0.0
/usr/local/erydb/lib/libcommon.so.1.0.0
/usr/local/erydb/lib/libboost_erydb.so.1.0.0
/usr/local/erydb/lib/libcompress.so.1.0.0
/usr/local/erydb/lib/libddlcleanuputil.so.1.0.0
/usr/local/erydb/lib/libbatchloader.so.1.0.0
/usr/local/erydb/lib/libmysqlcl_erydb.so.1.0.0
/usr/local/erydb/lib/libquerystats.so.1.0.0
/usr/local/erydb/lib/libwriteengineredistribute.so.1.0.0
/usr/local/erydb/lib/liberydbdatafile.so.1.0.0
/usr/local/erydb/lib/hdfs-20.so
/usr/local/erydb/lib/hdfs-12.so
/usr/local/erydb/lib/libgcc_s.so.1
/usr/local/erydb/lib/libstdc++.so.6.0.14
/usr/local/erydb/lib/libthrift.so.1.0.0
/usr/local/erydb/lib/libquerytele.so.1.0.0

%files storage-engine
/usr/local/erydb/lib/liberymysql.so.1.0.0
/usr/local/erydb/lib/libudf_mysql.so.1.0.0

%files mysql
/usr/local/erydb/mysql/lib/mysql/libmysqlclient.so.16.0.0
/usr/local/erydb/mysql/lib/mysql/libmysqlclient_r.so.16.0.0
/usr/local/erydb/mysql/lib/mysql/plugin/ha_federated.so.0.0.0
/usr/local/erydb/mysql/lib/mysql/plugin/ha_blackhole.so.0.0.0
/usr/local/erydb/mysql/lib/mysql/plugin/ha_archive.so.0.0.0
/usr/local/erydb/mysql/lib/mysql/plugin/ha_innodb.so.0.0.0
/usr/local/erydb/mysql/lib/mysql/plugin/ha_innodb_plugin.so.0.0.0
/usr/local/erydb/mysql/libexec/mysqlmanager
/usr/local/erydb/mysql/libexec/mysqld
/usr/local/erydb/mysql/bin/mysql_find_rows
/usr/local/erydb/mysql/bin/mysqlbug
/usr/local/erydb/mysql/bin/innochecksum
/usr/local/erydb/mysql/bin/mysql_secure_installation
/usr/local/erydb/mysql/bin/resolve_stack_dump
/usr/local/erydb/mysql/bin/my_print_defaults
/usr/local/erydb/mysql/bin/mysql_waitpid
/usr/local/erydb/mysql/bin/resolveip
/usr/local/erydb/mysql/bin/perror
/usr/local/erydb/mysql/bin/myisamlog
/usr/local/erydb/mysql/bin/mysql
/usr/local/erydb/mysql/bin/myisamchk
/usr/local/erydb/mysql/bin/mysql_fix_privilege_tables
/usr/local/erydb/mysql/bin/mysql_upgrade
/usr/local/erydb/mysql/bin/mysqlcheck
/usr/local/erydb/mysql/bin/myisampack
/usr/local/erydb/mysql/bin/mysql_setpermission
/usr/local/erydb/mysql/bin/mysqladmin
/usr/local/erydb/mysql/bin/mysqlslap
/usr/local/erydb/mysql/bin/mysql_zap
/usr/local/erydb/mysql/bin/mysqldump
/usr/local/erydb/mysql/bin/mysqld_safe
/usr/local/erydb/mysql/bin/mysqlshow
/usr/local/erydb/mysql/bin/mysqltest
/usr/local/erydb/mysql/bin/mysql_config
/usr/local/erydb/mysql/bin/mysql_client_test
/usr/local/erydb/mysql/bin/mysqlbinlog
/usr/local/erydb/mysql/bin/mysqld_multi
/usr/local/erydb/mysql/bin/mysqlaccess
/usr/local/erydb/mysql/bin/mysql_install_db
/usr/local/erydb/mysql/bin/msql2mysql
/usr/local/erydb/mysql/bin/mysqlimport
/usr/local/erydb/mysql/bin/replace
/usr/local/erydb/mysql/bin/mysql_convert_table_format
/usr/local/erydb/mysql/bin/myisam_ftdump
/usr/local/erydb/mysql/bin/mysql_tzinfo_to_sql
/usr/local/erydb/mysql/bin/mysql_fix_extensions
/usr/local/erydb/mysql/bin/mysqldumpslow
/usr/local/erydb/mysql/bin/mysqlhotcopy
/usr/local/erydb/mysql/share/mysql/config.small.ini
/usr/local/erydb/mysql/share/mysql/romanian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/korean/errmsg.sys
/usr/local/erydb/mysql/share/mysql/norwegian-ny/errmsg.sys
/usr/local/erydb/mysql/share/mysql/binary-configure
/usr/local/erydb/mysql/share/mysql/french/errmsg.sys
/usr/local/erydb/mysql/share/mysql/greek/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mysql-log-rotate
/usr/local/erydb/mysql/share/mysql/mysql_system_tables_data.sql
/usr/local/erydb/mysql/share/mysql/russian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mysql.server
/usr/local/erydb/mysql/share/mysql/mi_test_all.res
/usr/local/erydb/mysql/share/mysql/danish/errmsg.sys
/usr/local/erydb/mysql/share/mysql/portuguese/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mysql_fix_privilege_tables.sql
/usr/local/erydb/mysql/share/mysql/italian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mi_test_all
/usr/local/erydb/mysql/share/mysql/mysql_system_tables.sql
/usr/local/erydb/mysql/share/mysql/my-innodb-heavy-4G.cnf
/usr/local/erydb/mysql/share/mysql/norwegian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/fill_help_tables.sql
/usr/local/erydb/mysql/share/mysql/spanish/errmsg.sys
/usr/local/erydb/mysql/share/mysql/ndb-config-2-node.ini
/usr/local/erydb/mysql/share/mysql/slovak/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mysql_test_data_timezone.sql
/usr/local/erydb/mysql/share/mysql/czech/errmsg.sys
/usr/local/erydb/mysql/share/mysql/english/errmsg.sys
/usr/local/erydb/mysql/share/mysql/hungarian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/mysqld_multi.server
/usr/local/erydb/mysql/share/mysql/estonian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/german/errmsg.sys
/usr/local/erydb/mysql/share/mysql/errmsg.txt
/usr/local/erydb/mysql/share/mysql/swedish/errmsg.sys
/usr/local/erydb/mysql/share/mysql/dutch/errmsg.sys
/usr/local/erydb/mysql/share/mysql/charsets/cp866.xml
/usr/local/erydb/mysql/share/mysql/charsets/hebrew.xml
/usr/local/erydb/mysql/share/mysql/charsets/latin2.xml
/usr/local/erydb/mysql/share/mysql/charsets/armscii8.xml
/usr/local/erydb/mysql/share/mysql/charsets/latin7.xml
/usr/local/erydb/mysql/share/mysql/charsets/geostd8.xml
/usr/local/erydb/mysql/share/mysql/charsets/latin5.xml
/usr/local/erydb/mysql/share/mysql/charsets/swe7.xml
/usr/local/erydb/mysql/share/mysql/charsets/keybcs2.xml
/usr/local/erydb/mysql/share/mysql/charsets/cp1257.xml
/usr/local/erydb/mysql/share/mysql/charsets/macroman.xml
/usr/local/erydb/mysql/share/mysql/charsets/cp1251.xml
/usr/local/erydb/mysql/share/mysql/charsets/cp1256.xml
/usr/local/erydb/mysql/share/mysql/charsets/macce.xml
/usr/local/erydb/mysql/share/mysql/charsets/dec8.xml
/usr/local/erydb/mysql/share/mysql/charsets/latin1.xml
/usr/local/erydb/mysql/share/mysql/charsets/greek.xml
/usr/local/erydb/mysql/share/mysql/charsets/cp850.xml
/usr/local/erydb/mysql/share/mysql/charsets/hp8.xml
/usr/local/erydb/mysql/share/mysql/charsets/cp852.xml
/usr/local/erydb/mysql/share/mysql/charsets/koi8r.xml
/usr/local/erydb/mysql/share/mysql/charsets/README
/usr/local/erydb/mysql/share/mysql/charsets/cp1250.xml
/usr/local/erydb/mysql/share/mysql/charsets/koi8u.xml
/usr/local/erydb/mysql/share/mysql/charsets/Index.xml
/usr/local/erydb/mysql/share/mysql/charsets/ascii.xml
/usr/local/erydb/mysql/share/mysql/config.medium.ini
/usr/local/erydb/mysql/share/mysql/my-huge.cnf
/usr/local/erydb/mysql/share/mysql/polish/errmsg.sys
/usr/local/erydb/mysql/share/mysql/my-medium.cnf
/usr/local/erydb/mysql/share/mysql/my-large.cnf
/usr/local/erydb/mysql/share/mysql/config.huge.ini
/usr/local/erydb/mysql/share/mysql/ukrainian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/serbian/errmsg.sys
/usr/local/erydb/mysql/share/mysql/my-small.cnf
/usr/local/erydb/mysql/share/mysql/japanese/errmsg.sys
/usr/local/erydb/mysql/mysql-erydb
/usr/local/erydb/mysql/install_erydb_mysql.sh
/usr/local/erydb/mysql/syscatalog_mysql.sql
/usr/local/erydb/mysql/dumpcat_mysql.sql
/usr/local/erydb/mysql/dumpcat.pl
/usr/local/erydb/mysql/erysetuserpriority.sql
/usr/local/erydb/mysql/eryremoveuserpriority.sql
/usr/local/erydb/mysql/eryshowprocesslist.sql

%config /usr/local/erydb/mysql/my.cnf

#
# Scriptlets
# for an install, pre & post run with $1 set to 1
# for an erase, preun & postun run with $1 set to 0
# for an upgrade, pre & post run first, with $1 set to 2 then the _old_ preun & postun run with $1 set to 1

%post platform
rpmmode=install
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=upgrade
	fi
fi

prefix=/usr/local

test -x /usr/local/erydb/bin/post-install && /usr/local/erydb/bin/post-install --prefix=$prefix --rpmmode=$rpmmode

echo "ERYDB RPM install completed"

%post libs
rpmmode=install
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=upgrade
	fi
fi

prefix=/usr/local

echo "ERYDB RPM install completed"

%post storage-engine
rpmmode=install
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=upgrade
	fi
fi

prefix=/usr/local

echo "ERYDB RPM install completed"

%post mysql
rpmmode=install
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=upgrade
	fi
fi

prefix=/usr/local

echo "ERYDB RPM install completed"

%post enterprise
rpmmode=install
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=upgrade
	fi
fi

prefix=/usr/local

echo "ERYDB RPM install completed"

%preun platform
rpmmode=upgrade
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=erase
	fi
else
	rpmmode=erase
fi

if [ $rpmmode = erase ]; then
	test -x /usr/local/erydb/bin/pre-uninstall && /usr/local/erydb/bin/pre-uninstall
fi

exit 0

%preun libs
rpmmode=upgrade
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=erase
	fi
else
	rpmmode=erase
fi

exit 0

%preun storage-engine
rpmmode=upgrade
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=erase
	fi
else
	rpmmode=erase
fi

exit 0

%preun enterprise
rpmmode=upgrade
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=erase
	fi
else
	rpmmode=erase
fi

exit 0

%preun mysql
rpmmode=upgrade
if  [ "$1" -eq "$1" 2> /dev/null ]; then
	if [ $1 -ne 1 ]; then
		rpmmode=erase
	fi
else
	rpmmode=erase
fi

if [ $rpmmode = erase ]; then
	/etc/init.d/mysql-erydb stop > /dev/null 2>&1
	if [ -x /sbin/chkconfig ]; then
		/sbin/chkconfig mysql-erydb off > /dev/null 2>&1
		/sbin/chkconfig --del mysql-erydb > /dev/null 2>&1
	elif [ -x /usr/sbin/update-rc.d ]; then
		/usr/sbin/update-rc.d -f mysql-erydb remove > /dev/null 2>&1
	fi
	rm -f /etc/init.d/mysql-erydb
fi

exit 0

